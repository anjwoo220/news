/Users/jaewoo/Documents/news project/utils.py:2: FutureWarning: 

All support for the `google.generativeai` package has ended. It will no longer be receiving 
updates or bug fixes. Please switch to the `google.genai` package as soon as possible.
See README for more details:

https://github.com/google-gemini/deprecated-generative-ai-python/blob/main/README.md

  import google.generativeai as genai
2026-01-13 17:24:49.577 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2026-01-13 17:24:49.636 
  [33m[1mWarning:[0m to view this Streamlit app on a browser, run it with the following
  command:

    streamlit run batch_job.py [ARGUMENTS]
2026-01-13 17:24:49.636 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2026-01-13 17:24:49.636 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2026-01-13 17:24:49.636 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2026-01-13 17:24:50.135 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2026-01-13 17:24:50.135 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2026-01-13 17:24:50.135 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2026-01-13 17:24:50.135 No runtime found, using MemoryCacheStorageManager
2026-01-13 17:24:50.135 No runtime found, using MemoryCacheStorageManager
2026-01-13 17:24:50.135 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2026-01-13 17:24:50.135 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2026-01-13 17:24:50.135 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2026-01-13 17:24:50.135 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2026-01-13 17:24:50.640 Thread 'Thread-2': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2026-01-13 17:24:50.640 Thread 'Thread-2': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2026-01-13 17:24:50.640 Thread 'Thread-2': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2026-01-13 17:24:51.971 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2026-01-13 17:24:51.971 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2026-01-13 17:24:51.971 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
Starting batch job (Strict Mode + Images)...
Fetching RSS feeds (Balanced Mode)...
Fetching [General] https://www.bangkokpost.com/rss/data/topstories.xml...
Successfully parsed https://www.bangkokpost.com/rss/data/topstories.xml: Found 10 entries.
Fetching [General] https://www.thairath.co.th/rss/news...
Successfully parsed https://www.thairath.co.th/rss/news: Found 20 entries.
Skipping feed https://www.bangkokpost.com/rss/data/thailand.xml (Quota full for General)
Skipping feed https://www.bangkokpost.com/rss/data/most-recent.xml (Quota full for General)
Skipping feed https://www.khaosodenglish.com/feed/ (Quota full for General)
Skipping feed https://www.nationthailand.com/rss (Quota full for General)
Fetching [Business] https://www.prachachat.net/feed...
XML Parse Warning for https://www.prachachat.net/feed: <unknown>:9:1: duplicate attribute
Successfully parsed https://www.prachachat.net/feed: Found 30 entries.
Fetching Google News (Backup)...
Fetching Google News: Thailand Tourism...
 -> Found 0 items from Google News.
Total items fetched: 40
Loaded 95 recent titles for similarity check.
Duplicate ID found, skipping: People's Party optimistic on forming govt
Items after duplicate/similarity check: 39
Items selected for API call: 8
 - Processing: Phuket starts tour boat cleanup after fire, fatal collision [General]
   - Scraping for image: https://www.bangkokpost.com/thailand/general/3174688/phuket-starts-tour-boat-cleanup-after-fire-fatal-collision
   + Found Image: https://static.bangkokpost.com/media/content/20260113/c1_3174688_700.jpg
 - Processing: à¸à¸¢à¸¨. à¹€à¸£à¹ˆà¸‡à¸Šà¹ˆà¸§à¸¢à¸à¸²à¸•à¸´à¸žà¸¢à¸²à¸šà¸²à¸¥à¸£à¹‰à¸­à¸¢à¹€à¸­à¹‡à¸” à¹€à¸ªà¸µà¸¢à¸Šà¸µà¸§à¸´à¸•à¸‚à¸“à¸°à¹€à¸‚à¹‰à¸²à¹€à¸§à¸£ à¹€à¸•à¸£à¸µà¸¢à¸¡à¸£à¸°à¸‡à¸±à¸šà¸«à¸™à¸µà¹‰à¸Šà¹ˆà¸§à¸¢ [Business]
   + Found Image: https://www.prachachat.net/wp-content/uploads/2024/06/cover-2024-06-28T123209.373.jpg
 - Processing: Thai satellite falling back to earth after failed launch, but is insured [General]
   - Scraping for image: https://www.bangkokpost.com/thailand/general/3174620/thai-satellite-falling-back-to-earth-after-failed-launch-but-is-insured
   + Found Image: https://static.bangkokpost.com/media/content/20260113/c1_3174620_260113142143_700.jpg
 - Processing: à¸ˆà¸²à¸à¹€à¸ˆà¹‰à¸²à¸žà¹ˆà¸­à¸­à¸µà¸„à¸­à¸¡à¹€à¸¡à¸´à¸£à¹Œà¸‹ à¸ªà¸¹à¹ˆà¸ªà¸™à¸²à¸¡à¸à¸²à¸£à¹€à¸¡à¸·à¸­à¸‡ â€œà¸›à¹‰à¸­à¸¡-à¸ à¸²à¸§à¸¸à¸˜â€ à¸›à¸£à¸°à¸à¸²à¸¨à¸¥à¸¸à¸¢à¹à¸à¹‰à¸à¸•à¸´à¸à¸² à¹à¸‚à¹ˆà¸‡à¸—à¸¸à¸™à¸‚à¹‰à¸²à¸¡à¸Šà¸²à¸•à¸´ [Business]
   + Found Image: https://www.prachachat.net/wp-content/uploads/2026/01/pawoot2.png
 - Processing: â€˜à¹€à¸§à¸µà¸¢à¸”à¸™à¸²à¸¡â€™ à¹€à¸à¸´à¸™à¸”à¸¸à¸¥à¸à¸²à¸£à¸„à¹‰à¸²à¸ªà¸«à¸£à¸±à¸à¹à¸‹à¸‡à¸ˆà¸µà¸™ à¸£à¸š.à¸—à¸£à¸±à¸¡à¸›à¹Œ à¹€à¸¥à¹‡à¸‡à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸‘à¸¹à¸• [Business]
   + Found Image: https://www.prachachat.net/wp-content/uploads/2026/01/vietnam-america-flag-moving-different-direction-3d-rendering-scaled.jpg
 - Processing: Pheu Thai courts gaming industry [General]
   - Scraping for image: https://www.bangkokpost.com/thailand/politics/3174243/pheu-thai-courts-gaming-industry
   + Found Image: https://static.bangkokpost.com/media/content/dcx/2026/01/13/5923918_700.jpg
 - Processing: UNIX à¹€à¸•à¸£à¸µà¸¢à¸¡à¸‚à¸²à¸¢ IPO à¹„à¸¡à¹ˆà¹€à¸à¸´à¸™ 180 à¸¥à¹‰à¸²à¸™à¸«à¸¸à¹‰à¸™ à¸ˆà¹ˆà¸­à¹€à¸‚à¹‰à¸²à¹€à¸—à¸£à¸” SET à¸›à¸µà¸™à¸µà¹‰ [Business]
   + Found Image: https://www.prachachat.net/wp-content/uploads/2026/01/UNIX.jpg
 - Processing: à¸Šà¸µà¹‰à¸Šà¸°à¸•à¸² "à¸¡à¸²à¸£à¸µà¸™ à¹€à¸¥à¸­ à¹€à¸›à¸™" à¸œà¸¹à¹‰à¸™à¸³à¸‚à¸§à¸²à¸ˆà¸±à¸”à¸à¸£à¸±à¹ˆà¸‡à¹€à¸¨à¸ª à¸­à¸¸à¸—à¸˜à¸£à¸“à¹Œà¸„à¸³à¸•à¸±à¸”à¸ªà¸´à¸™à¸„à¸”à¸µà¸¢à¸±à¸à¸¢à¸­à¸à¹€à¸‡à¸´à¸™à¸­à¸µà¸¢à¸¹ [General]
   + Found Image: https://static.thairath.co.th/media/CiHZjUdJ5HPNXJ92O2xWGfp3aJqeHs3TTZ.jpg
Calling Gemini API...
Starting sequential analysis for 8 items...
[1/8] Processing: Phuket starts tour boat cleanup after fire, fatal collision...
   -> Scraped full content (1622 chars).
   -> Success. Topics so far: 1
   -> Waiting 20 seconds to respect API rate limits...
[2/8] Processing: à¸à¸¢à¸¨. à¹€à¸£à¹ˆà¸‡à¸Šà¹ˆà¸§à¸¢à¸à¸²à¸•à¸´à¸žà¸¢à¸²à¸šà¸²à¸¥à¸£à¹‰à¸­à¸¢à¹€à¸­à¹‡à¸” à¹€à¸ªà¸µà¸¢à¸Šà¸µà¸§à¸´à¸•à¸‚à¸“à¸°à¹€à¸‚à¹‰à¸²à¹€à¸§à¸£ à¹€à¸•à¸£à¸µà¸¢à¸¡à¸£à¸°à¸‡à¸±à¸šà¸«à¸™à¸µà¹‰à¸Šà¹ˆà¸§à¸¢...
   -> Scraping failed/empty, falling back to summary.
   -> Success. Topics so far: 2
   -> Waiting 20 seconds to respect API rate limits...
Traceback (most recent call last):
  File "/Users/jaewoo/Documents/news project/batch_job.py", line 376, in <module>
    main()
    ~~~~^^
  File "/Users/jaewoo/Documents/news project/batch_job.py", line 205, in main
    analysis_result, error_msg = utils.analyze_news_with_gemini(target_items, api_key)
                                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/jaewoo/Documents/news project/utils.py", line 432, in analyze_news_with_gemini
    time.sleep(20)
    ~~~~~~~~~~^^^^
KeyboardInterrupt
